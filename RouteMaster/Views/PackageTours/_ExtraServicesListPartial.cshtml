@model IEnumerable<RouteMaster.Models.ViewModels.ExtraServiceIndexVM>


@section  Styles{




    <style>
        thead {
            background-color: lightblue;
            color: black;
        }
    </style>


    <style>
        .addExtraService {
            background-color: lightblue
        }
    </style>

}


<h2>額外服務一覽</h2>

<input type="search" class="form-control form-control-sm" id="extPartialSearch" >
<button type="button" id="extPartialSearchBtn">搜索</button>

<table id="extraServiceTable" class="table table-striped table-hover">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AttractionName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Price)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>

                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AttractionName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                    <button class="btn btn-sm btn-primary addExtraService" data-id="@item.Id">Add</button>
                </td>
            </tr>
        }
    </tbody>

</table>



    
    <script>  


        //$(document).ready(function() {

        //    $("#extPartialSearchBtn").click(function() {
        //// 获取搜索条件的值
        //var searchKeyword = $("#extPartialSearch").val();

        //console.log('666666')

        //$.ajax({
        //    url: "/PackageTours/SearchExtraService",
        //method: "POST",
        //data: {
        //search: searchKeyword
        //},
        //success: function(response) {

        //},
        //    error: function (error) {
        //        console.log(error);
        //    }
        //});
        //});

        //});


        document.addEventListener('DOMContentLoaded', function () {
            const searchBtn = document.getElementById('extPartialSearchBtn');
            const searchInput = document.getElementById('extPartialSearch');

            searchBtn.addEventListener('click', function () {
                // 获取搜索条件的值
                //var searchKeyword = searchInput.value;
                //fetch('/PackageTours/SearchExtraService', {
                //    method: 'POST',
                //    headers: {
                //        'Content-Type': 'application/x-www-form-urlencoded'
                //    },

                //    //body: JSON.stringify({ search: searchKeyword }),
                //    body: searchKeyword ,
                //})
                //    .then(response => response.json())
                //    .then(data => {
                //        console.log(data);
                //    })
                //    .catch(error => {
                //        // 处理请求错误
                //        console.error(error);
                //    });




                var searchKeyword = searchInput.value;

                var data = new FormData();
                data.append('searchKeyword', searchKeyword);

                fetch('/PackageTours/SearchExtraService', {
                    method: 'POST',
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: data
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => {
                        // 处理请求错误
                        console.error('沒傳回前端');
                    });




            });
        });
    </script>


